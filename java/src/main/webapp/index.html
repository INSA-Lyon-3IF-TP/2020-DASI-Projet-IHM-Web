<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>TD DASI - Initiation Web</title>
    </head>
    <body>
        <h1>TD DASI - Initiation Web</h1>
        <p>Ce TD vous intie aux technologies Web. Êtes-vous prêts ?</p>
        <p><a href="./login.html">Aller à la page de Connexion</a></p>
        
        <div id="main">
            
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            $(document).ready(function(){
               $.ajax({
                url: 'ActionServlet?',
                method: 'get',
                dataType: 'json',
                data: {'todo': 'listerMediums'}
                }).done(function (mediums) {
                    $('#main').empty();
                    console.log(mediums);
                    $('#main').append(
                        $('<div />')
                            .attr('id', 'mediums')
                            .attr('style', 'width: 90%')
                            .append(
                                $('<table />')
                                    .attr('id', 'mediumsTable')
                                    .addClass('table')
                                    .append(
                                        $('<thead />')
                                            .append(
                                                $('<tr />')
                                                    .attr('id', 'table_head')
                                                    .append(
                                                        $('<th />')
                                                            .attr('scope', 'col')
                                                            .html('Dénomination'),
                                                        $('<th />')
                                                            .attr('scope', 'col')
                                                            .html('Genre'),
                                                        $('<th />')
                                                            .attr('scope', 'col')
                                                            .html('Présentation')
                                                    )
                                            )
                                    )
                            )
                    );
                    mediums.mediums.forEach(function(medium){
                        let mediumName = $('<td />').html(medium.denomination);
                        let mediumGenre = $('<td />').html(medium.genre);
                        let mediumPresentation = $('<td />').html(medium.presentation);
                        $('#mediumsTable')
                                .append(
                                    $('<tr>')
                                    .append(
                                        mediumName,
                                        mediumGenre,
                                        mediumPresentation
                                    )
                                );
                    })
                });
            });
            $('#main').append(
                $('<h1 />').html("Test jquery")
                );
        </script>
    </body>
</html>
